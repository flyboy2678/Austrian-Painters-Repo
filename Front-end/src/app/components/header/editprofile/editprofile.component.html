<nz-modal
  [nzVisible]="modalService.getVisible()"
  [nzFooter]="modalFooter"
  nzTitle="Edit Profile"
  (onCancel)="handleCancel()"
>
  <ng-container *nzModalContent>
    <form [formGroup]="profileForm">
      <label for="profile_picture">Change profile picture</label>
      <input
        type="file"
        accept=".jpg, .jpeg, .png"
        id="profile_picture"
        formControlName="profile_picture"
        (change)="onFileSelected($event)"
        class="w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-purple_accent h-10"
      />
      <label for="firstName">First Name</label>
      <input
        type="text"
        id="firstName"
        formControlName="firstName"
        required
        class="w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-purple_accent h-10"
      />
      <div class="h-7">
        <span
          *ngIf="
            profileForm.get('firstName')?.invalid &&
            profileForm.get('firstName')?.touched
          "
          class="text-xs text-red-600 block mt-1"
          >Please enter a first name</span
        >
      </div>
      <label for="lastName">Last Name</label>
      <input
        type="text"
        id="lastName"
        formControlName="lastName"
        required
        class="w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-purple_accent h-10"
      />
      <div class="h-7">
        <span
          *ngIf="
            profileForm.get('lastName')?.invalid &&
            profileForm.get('lastName')?.touched
          "
          class="text-xs text-red-600 block mt-1"
          >Please enter a last name</span
        >
      </div>
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        value="{{ user.email }}"
        formControlName="email"
        required
        class="w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-purple_accent h-10"
      />
      <div class="h-7">
        <span
          *ngIf="
            profileForm.get('email')?.invalid &&
            profileForm.get('email')?.touched
          "
          class="text-xs text-red-600 block mt-1"
          >Please enter a valid email address</span
        >
      </div>
    </form>
  </ng-container>
  <ng-template #modalFooter>
    <button
      nz-button
      nzType="default"
      (click)="handleCancel()"
      class="border border-gray-300 rounded-md p-2 mr-2"
    >
      Cancel
    </button>
    <button
      nz-button
      nzType="primary"
      [disabled]="profileForm.invalid"
      (click)="handleSubmit()"
      class="bg-purple_accent p-2 rounded-md text-white disabled:opacity-50"
    >
      Save
    </button>
  </ng-template>
</nz-modal>
