<div class="w-full h-full flex flex-row bg-gray-100">
  <div class="flex flex-col h-full w-1/3 bg-white ml-4 my-4">
    @for (user of users; track $index) {
    <div
      (click)="selectUser(user.Emp_id)"
      [ngClass]="{
        'bg-blue-500 text-white p-2 rounded-lg mb-2 cursor-pointer':
          user.Emp_id === receiver_id,
        ' text-text_secondary p-2 rounded-lg mb-2 cursor-pointer':
          user.Emp_id !== receiver_id
      }"
    >
      {{ user.FirstName }}
    </div>
    }
  </div>
  @if (receiver_id ==="") {
  <div
    class="text-base text-text_secondary flex w-2/3 h-full justify-center items-center"
  >
    Select a user to start chatting
  </div>
  }@else {
  <div class="mx-auto p-4 bg-gray-100 shadow-lg rounded-lg w-2/3 h-full">
    <div class="overflow-y-auto h-[90%] p-4 mb-4 bg-white rounded-lg">
      <div *ngFor="let message of messages">
        <div
          [ngClass]="{
            'text-right': message.sender_id === sender_id,
            'text-left': message.sender_id !== sender_id
          }"
        >
          <div
            [ngClass]="{
              'bg-blue-500 text-white p-2 rounded-lg inline-block mb-2':
                message.sender_id === sender_id,
              'bg-gray-300 text-gray-900 p-2 rounded-lg inline-block mb-2':
                message.sender_id !== sender_id
            }"
          >
            {{ message.message_text }}
          </div>
        </div>
      </div>
    </div>
    <!-- Input for new message -->
    <div class="flex items-center">
      <input
        type="text"
        [(ngModel)]="newMessage"
        placeholder="Type a message..."
        class="flex-grow p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:border-blue-500"
      />
      <button
        (click)="sendMessage()"
        class="ml-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring"
      >
        Send
      </button>
    </div>
  </div>
  }
</div>
